# 라이브러리를 익히고 사용하라
## 표준 라이브러리의 장점
### 해당 코드를 작성한 전문가의 지식과 앞서 사용한 프로그래머들의 경험을 활용할 수 있다
예를들어 무작위 정수 하나를 생성하고 싶다고 해보자.
``` java
static Random rnd = new Random();

static int random(int n) {
    return Math.abs(rnd.nextInt()) % n;
}
```
#### random 메서드의 3가지 문제
- n이 그리 크지 않은 2의 제곱수라면 얼마 지나지 않아 같은 수열이 반복된다.
- n이 2의 제곱수가 아니라면 몇몇 숫자가 평균적으로 더 자주 반환된다. 이 현상은 n값이 클수록 두드러진다.
    > 필자가 무작위수를 백만 개 생성한 다음, 그중 중간 값보다 작은 게 몇 개인지 출력하는 테스트를 진행했다.  
    이상적이라면 약 50만 개가 출력돼야 하지만, 결과는 666,666에 가까운 값으로 전체의 약 2/3 이었다.   
- 지정한 범위 '바깥'의 수가 종종 튀어나올 수 있다.
    > rnd.nextInt()가 반환한 값을 Math.abs를 이용해 음수가 아닌 정수로 매핑하기 때문이다.  
    nextInt()가 Integer.MIN_VALUE를 반환하면 Math.abs도 Integer.MIN_VALUE를 반환하고, 나머지 연산자는 음수를 반환해버린다.  

위 문제들을 해결하려면 의사난수 생성기, 정수론, 2의 보수 계산 등에 조예가 깊어야 하지만, 다행히 우리가 직접 해결할 필요는 없다.  
Random.nextInt(int)가 이미 해결해놨고, 이 라이브러리가 릴리즈된 후 20여 년 가까지 수백만의 개발자가 열심히 사용했지만 버그가 보고된 적이 없다.

자바 7부터는 Random 대신 ThreadLocalRandom 으로 대체하는 것이 좋다.  
Random 보다 더 고품질의 무작위 수를 생성할 뿐 아니라 속도도 더 빠르다.
### 부수적인 문제를 해결하느라 시간을 허비하지 않아도 된다

### 성능이 지속해서 개선된다
사용자가 많고, 업계 표준 벤치마크를 사용해 성능을 확인하기 때문에 표준 라이브러리 제작자들은 더 나은 방법을 꾸준히 모색할 수밖에 없다.
### 기능이 점점 많아진다
### 여러분이 작성한 코드가 많은 사람에게 낯익은 코드가 된다

------

위 이점을 보았을 때 표준 라이브러리의 기능을 사용하는 것이 좋아 보이지만, 실상은 많은 프로그래머가 어떤 기능이 있는지 몰라 직접 구현해서 쓰고 있다.  

라이브러리가 너무 방대하여 모든 API 문서를 공부하기는 벅차겠지만, **자바 프로그래머라면 적어도 java.lang, java.util, java.io 와 그 하위 패키지들에는 익숙해져야 한다.**  
또한 컬렉션 프레임워크와 스트림 라이브러리, java.util.concurrent의 동시성 기능도 알아두면 큰 도움이 된다.

## 결론
바퀴를 발명하지 말자.  
일반적으로 라이브러리 코드는 개발자 각자가 작성하는 것보다 주목을 훨씬 많이 받으므로 코드 품질이 좋고, 점차 개선될 가능성이 크다.  
그러니 라이브러리를 적극 활용하자.